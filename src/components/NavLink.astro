---
import Button from "./ui/Button.astro";
import { Icon } from "astro-icon/components";

interface Props {
    id?: string;
    href?: string;
    text: string;
    items?: { href: string; text: string }[];
    icon: {
        name: string;
        class?: string;
    };
}

const { id, href, text, items, icon } = Astro.props as Props;
---

<li class="hs-accordion" id={id}>
  <button
    type="button"
    class="hs-accordion-toggle hs-accordion-active:text-red-600 hs-accordion-active:hover:bg-transparent w-full text-start flex items-center gap-x-3.5 py-2 px-2.5 text-sm text-gray-700 rounded-lg hover:bg-gray-100 focus:outline-none focus:bg-gray-100 dark:bg-neutral-800 dark:text-neutral-400 dark:hs-accordion-active:text-white dark:hover:bg-neutral-700 dark:hover:text-neutral-300 dark:focus:bg-neutral-700 dark:focus:text-neutral-300"
    aria-expanded="true"
    aria-controls={id}
  >
    <Icon name={icon.name} size={24} />
    {items ? text : <a href={href}>{text}</a>}
    {
      items && (
        <>
          <Icon
            name="mdi:chevron-up"
            class="ms-auto hs-accordion-active:block hidden"
            size={20}
          />
          <Icon
            name="mdi:chevron-down"
            class="ms-auto hs-accordion-active:hidden block"
            size={20}
          />
        </>
      )
    }
  </button>

  <div
    id={id}
    class="hs-accordion-content w-full overflow-hidden transition-[height] duration-300 hidden"
    role="region"
    aria-labelledby={id}
  >
    {
      items && (
        <ul class="pt-2 ps-2">
          {items.map((item): any => (
            <li>
              <a
                class="flex items-center gap-x-3.5 py-2 px-2.5 text-sm text-gray-700 rounded-lg hover:bg-gray-100 focus:outline-none focus:bg-gray-100 dark:bg-neutral-800 dark:text-neutral-400 dark:hover:text-neutral-300 dark:focus:text-neutral-300"
                href={item.href}
              >
                {item.text}
              </a>
            </li>
          ))}
        </ul>
      )
    }
  </div>
</li>
