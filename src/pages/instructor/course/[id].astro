---
import TeacherLayout from "../../../layouts/TeacherLayout.astro";
import {
  getStudentsByCourseId,
  getCourseById,
} from "../../../components/services/course.ts";
import CourseStudentsTable from "../../../components/pages/instructor/course/CourseStudentsTable.astro";
import CardCourse from "../../../components/pages/instructor/course/CardCourse.astro";

const { id } = Astro.params;

let students;
let course;
if (id) {
  course = await getCourseById(id);
  students = await getStudentsByCourseId(id);
}
---

{
  course && students && (
    <TeacherLayout title={course.name}>
      <CardCourse course={course} />
      <CourseStudentsTable students={students} />
    </TeacherLayout>
  )
}
